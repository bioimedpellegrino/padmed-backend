{% extends 'layouts/base-triage.html' %}

{% block title %} Receptions {% endblock title %}

<!-- Specific CSS goes HERE -->
{% block stylesheets %}{% endblock stylesheets %}
{% block content %}
<button id="scanButton">Scan</button>
<button id="writeButton">Scan</button>
<p id="output"></p>
<p id="devices"></p>

<h1>
  print me
  </h1>
  <button onclick="window.print();">
  Print Me
  </button>


  <a onclick="sendToQuickPrinterChrome();">
    <br>Print Button</a>
<!-- Specific JS goes HERE --> 
{% block javascripts %}

<script>
  //onScan.attachTo(document);
// Register event listener
try{
  onScan.attachTo(document, {
    suffixKeyCodes: [13], // enter-key expected at the end of a scan
    reactToPaste: true, // Compatibility to built-in scanners in paste-mode (as opposed to keyboard-mode)
    onScan: function(sCode, iQty) { // Alternative to document.addEventListener('scan')
        document.getElementById("output").innerHTML = 'Scanned: ' + iQty + 'x ' + sCode; 
    },
    onKeyDetect: function(iKeyCode){ // output all potentially relevant key events - great for debugging!
      document.getElementById("output").innerHTML = 'Pressed: ' + iKeyCode;
    }
});
} catch(err){
  //document.getElementById("output").innerHTML = err + " " + err.message;
}
  function sendToQuickPrinterChrome(){
    var commandsToPrint =
                 "<LOGO>" +
                         "<BIG><BOLD><CENTER> CAZZO <BR>\n" +
                         "<CENTER>Bubino<BR>\n" +
                         "<CENTER>Il bubino<BR>\n" +
                         "<BOLD>Bay<BR>\n" +
                         "<LEFT>Che va<BR>\n" +
                         "<RIGHT><BOLD>A MUMBAII<BR>\n" +
                         "<BR>\n" +
                         "<CUT>\n" +
                         "<DRAWER>\n" // OPEN THE CASH DRAWER
                 ;
     var textEncoded = encodeURI(commandsToPrint);
     window.location.href="intent://"+textEncoded+"#Intent;scheme=quickprinter;package=pe.diegoveloper.printerserverapp;end;";
 }
</script>
{% endblock javascripts %}
{% endblock content %}
